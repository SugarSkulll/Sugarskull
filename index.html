<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sugar Skull</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="repos.css" />
</head>
<body>
  <header>
    <div class="logo">
      <img src="imagenes/logosk.png" alt="logo" />
    </div>
    <h1>Sugar Skull</h1>
  </header>
  <div id="usuario-info" style="text-align: right; margin: 10px; font-weight: bold;"></div>
  <div id="usuario-info" style="text-align: right; margin: 10px; font-weight: bold;"></div>
  <button id="logout-btn" style="display:none; float: right; margin: 10px;">Cerrar sesión</button>
  <nav>
    <div class="menu-hamburguesa" id="btn-menu">&#9776;</div> <!-- Icono hamburguesa -->
    <ul id="menu-navegacion">
      <li><a href="index.html">Inicio</a></li>
      <li><a href="#productos">Productos</a></li>
      <li><a href="#nosotros">Nosotros</a></li>
      <li><a href="#formulario">Pedidos</a></li>
    </ul>
  </nav>

  <form class="busqueda" method="GET">
    <input type="text" id="buscador" placeholder="Buscar productos..." />
  </form>

  <section class="hero">
    <h2>Repostería artesanal con estilo</h2>
    <p>Dulces únicos con colores, formas y sabores que encantan.</p>
  </section>

  <section class="productos" id="productos">
    <h3>Nuestros productos</h3>
    <div class="galeria">
      <div class="producto" data-nombre="Pastel de chocolate">
        <a href="pastel-chocolate.html">
          <img src="imagenes/pastelcho.jpg" alt="Pastel de chocolate" />
          <p>Pastel de chocolate</p>
        </a>
      </div>
      <div class="producto" data-nombre="Alfajores">
        <a href="alfajores.html">
          <img src="imagenes/alfajores.jpg" alt="Alfajores" />
          <p>Alfajores</p>
        </a>
      </div>
      <div class="producto" data-nombre="Galletas decoradas">
        <a href="galletasdecoradas.html">
          <img src="imagenes/galletasdecoradas.jpg" alt="Galletas decoradas" />
          <p>Galletas decoradas</p>
        </a>
      </div>
      <div class="producto" data-nombre="Pan salado">
        <a href="pansalado.html">
          <img src="imagenes/pansalado.jpg" alt="Pan salado" />
          <p>Pan salado</p>
        </a>
      </div>
      <div class="producto" data-nombre="Chocolates">
        <a href="chocolates.html">
          <img src="imagenes/chocolates.jpg" alt="Chocolates" />
          <p>Chocolates</p>
        </a>
      </div>
    </div>
  </section>

  <section class="nosotros" id="nosotros">
    <h3>Sobre nosotros</h3>
    <p>En Sugar Skull combinamos la pasión por la repostería con creatividad para ofrecer dulces que sorprenden.</p>
  </section>

  <section class="contacto" id="formulario">
    <h3>Haz tu pedido</h3>
    <p>Rellena el siguiente formulario para encargar tus dulces favoritos.</p>

    <!-- FORMULARIO DE FORMSPREE -->
    <form action="https://formspree.io/f/meogwpaa" method="POST">
      <label for="nombre">Nombre:</label>
      <input type="text" id="nombre" name="nombre" required>

      <label for="email">Correo electrónico:</label>
      <input type="email" id="email" name="email" required>

      <label for="producto">Producto deseado:</label>
      <select id="producto" name="producto" required>
        <option value="">-- Selecciona --</option>
        <option value="pastel">Pastel de chocolate</option>
        <option value="alfajores">Alfajores</option>
        <option value="galletas">Galletas decoradas</option>
        <option value="pan salado">Pan salado</option>
        <option value="chocolates">Chocolates</option>
        <option value="otro">Otro</option>
      </select>

      <label for="mensaje">Detalles del pedido:</label>
      <textarea id="mensaje" name="mensaje" rows="4" placeholder="Cantidad, sabor, fecha de entrega..." required></textarea>

      <button type="submit">Enviar pedido</button>
    </form>

    <hr>

<!-- Registro -->
<div id="seccion-registro">
    <h3>Registro</h3>
    <input type="email" id="email-registro" placeholder="Correo">
    <input type="password" id="password-registro" placeholder="Contraseña">
    <button onclick="registrar()">Registrarse</button>
  </div>
  
  <!-- Inicio de sesión -->
  <div id="seccion-login">
    <h3>Iniciar Sesión</h3>
    <input type="email" id="email-login" placeholder="Correo">
    <input type="password" id="password-login" placeholder="Contraseña">
    <button onclick="login()">Entrar</button>
  </div>
  
  <!-- Info del usuario + cerrar sesión -->
  <div id="usuario-logueado" style="display: none;">
    <p id="usuario-info"></p>
    <button onclick="logout()">Cerrar sesión</button>
  </div>
  

    <!-- PEDIDO CON FIREBASE -->
    <h3>Hacer pedido (requiere sesión)</h3>
    <form id="pedido-form">
      <input type="text" id="producto-fb" placeholder="Producto">
      <input type="number" id="cantidad" placeholder="Cantidad">
      <button type="submit">Hacer pedido</button>
    </form>
  </section>

  <footer>
    <p>&copy; 2025 Sugar Skull - Todos los derechos reservados</p>
  </footer>

  <!-- BUSCADOR Y FUNCIONES PERSONALIZADAS -->
  <script src="produc.js" defer></script>

  <!-- FIREBASE (USANDO VERSIÓN COMPATIBLE PARA QUE TU CÓDIGO FUNCIONE) -->
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBVvCzJREpup4MBMc8zHZUoXZl5yrHFZr0",
      authDomain: "reposteriaweb-d68f8.firebaseapp.com",
      projectId: "reposteriaweb-d68f8",
      storageBucket: "reposteriaweb-d68f8.appspot.com",
      messagingSenderId: "678031138136",
      appId: "1:678031138136:web:4cf6a92951205be6a4d92d"
    };

    // Inicializar Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // Registro
    function registrar() {
      const email = document.getElementById("email-registro").value;
      const pass = document.getElementById("password-registro").value;
      auth.createUserWithEmailAndPassword(email, pass)
        .then(() => alert("Registro exitoso"))
        .catch(error => alert("Error: " + error.message));
    }

    // Login
    function login() {
      const email = document.getElementById("email-login").value;
      const pass = document.getElementById("password-login").value;
      auth.signInWithEmailAndPassword(email, pass)
        .then(() => alert("Sesión iniciada"))
        .catch(error => alert("Error: " + error.message));
    }

    // Guardar pedido en Firestore
    document.getElementById("pedido-form").addEventListener("submit", (e) => {
      e.preventDefault();
      const producto = document.getElementById("producto-fb").value;
      const cantidad = document.getElementById("cantidad").value;
      const usuario = auth.currentUser;

      if (usuario) {
        db.collection("pedidos").add({
          producto,
          cantidad,
          usuario: usuario.email,
          fecha: new Date()
        })
        .then(() => alert("Pedido guardado"))
        .catch((error) => alert("Error al guardar: " + error));
      } else {
        alert("Inicia sesión para hacer un pedido");
      }
    });
    auth.onAuthStateChanged((user) => {
  const seccionLogin = document.getElementById("seccion-login");
  const seccionRegistro = document.getElementById("seccion-registro");
  const seccionUsuario = document.getElementById("usuario-logueado");
  const usuarioInfo = document.getElementById("usuario-info");

  if (user) {
    // Usuario logueado
    seccionLogin.style.display = "none";
    seccionRegistro.style.display = "none";
    seccionUsuario.style.display = "block";
    usuarioInfo.textContent = "Hola, " + user.email;
  } else {
    // Usuario no logueado
    seccionLogin.style.display = "block";
    seccionRegistro.style.display = "block";
    seccionUsuario.style.display = "none";
    usuarioInfo.textContent = "";
  }
});
function logout() {
  auth.signOut()
    .then(() => alert("Sesión cerrada"))
    .catch(error => alert("Error al cerrar sesión: " + error.message));
}
  </script>
  <script>
    const btnMenu = document.getElementById('btn-menu');
    const menuNavegacion = document.getElementById('menu-navegacion');
  
    btnMenu.addEventListener('click', () => {
      menuNavegacion.classList.toggle('mostrar');
    });
  </script>
  
</body>
</html>
